import{d as v,r as l,e as f,j as n}from"./index-048001ff.js";import{S as i}from"./index-3bbe5032.js";const p=[{label:"长沙",value:"10001"},{label:"武汉",value:"20001"},{label:"杭州",value:"30001"}],S=()=>{const t=v(e=>e.isDark),[o,u]=l.useState("10001"),[c,w]=l.useState(null);l.useEffect(()=>{b()},[o]),l.useEffect(()=>{c&&c.setMapStyleV2({styleId:t?"a801e09a76bc67ebdcb1b6d15dd0a6f1":""})},[t]);const b=async()=>{const e=await f.orderCluster(o);setTimeout(()=>{m(e)})},m=e=>{const a=new window.BMapGL.Map("map");w(a);const r=p.find(s=>s.value===o);a.centerAndZoom(r==null?void 0:r.label,10),a.enableScrollWheelZoom();const x=new window.BMapGL.ScaleControl;a.addControl(x);const C=new window.BMapGL.ZoomControl;a.addControl(C),setTimeout(()=>{t&&a.setMapStyleV2({styleId:t?"a801e09a76bc67ebdcb1b6d15dd0a6f1":""})},60);const d=[];e.forEach(s=>{const M=new window.BMapGL.Point(s.lng,s.lat);d.push(new window.BMapGL.Marker(M))}),d.length&&new window.BMapLib.MarkerClusterer(a,{markers:d})},h=e=>{u(e)};return n.jsxs("div",{style:{height:"calc(100vh - 50px - 50px - 40px)",borderRadius:5,backgroundColor:"var(--bg-color)"},children:[n.jsx(i,{value:o,style:{width:120,marginBottom:10},onChange:h,children:p.map(e=>n.jsx(i.Option,{value:e.value,children:e.label},e.value))}),n.jsx("div",{id:"map",style:{height:"calc(100% - 42px)"}})]})};export{S as default};

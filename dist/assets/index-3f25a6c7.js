import{r as l,i as St,k as xt,l as He,n as rt,p as be,q as Ce,c as U,s as ke,v as nt,g as ot,m as it,K as Me,a as st,C as Ie,o as It,w as Et,x as jt,y as Ot,z as Dt,A as Pt,E as at,F as lt,G as ct,_ as ue,H as dt,I as De,R as Te,J as Rt,L as Ft,M as Xe,N as Nt,O as Lt,P as kt,Q as ut,S as Tt,U as At,V as ze,W as Ut,X as Mt,Y as Ae,Z as _t,$ as Be,B as ne,b as pt,t as mt,a0 as qe,a1 as Wt,a2 as Ht,a3 as Xt,a4 as zt,a5 as Bt,a6 as qt,a7 as Ge,a8 as Gt,d as Kt,j as f,a9 as X,e as fe,aa as de,ab as Vt,ac as Se,f as Jt,ad as Ke,ae as Qt,af as Ve}from"./index-048001ff.js";import{M as Yt}from"./index-de2b5524.js";import{T as Zt}from"./index-c7d9fd56.js";import{S as te}from"./index-3bbe5032.js";import{u as er,T as tr}from"./Table-a9fffeff.js";var rr={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},nr=function(){var t=l.useRef([]),r=l.useRef(null);return l.useEffect(function(){var n=Date.now(),i=!1;t.current.forEach(function(s){if(s){i=!0;var a=s.style;a.transitionDuration=".3s, .3s, .3s, .06s",r.current&&n-r.current<100&&(a.transitionDuration="0s, 0s")}}),i&&(r.current=Date.now())}),t.current},Je=0,or=xt();function ir(){var e;return or?(e=Je,Je+=1):e="TEST_OR_SSR",e}const sr=function(e){var t=l.useState(),r=St(t,2),n=r[0],i=r[1];return l.useEffect(function(){i("rc_progress_".concat(ir()))},[]),e||n};var ar=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Qe(e){return+e.replace("%","")}function Ye(e){var t=e??[];return Array.isArray(t)?t:[t]}var ve=100,Pe=function(t,r,n,i,s,a,o,c,d,u){var g=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,h=n/100*360*((360-a)/360),b=a===0?0:{bottom:0,top:180,left:90,right:-90}[o],C=(100-i)/100*r;return d==="round"&&i!==100&&(C+=u/2,C>=r&&(C=r-.01)),{stroke:typeof c=="string"?c:void 0,strokeDasharray:"".concat(r,"px ").concat(t),strokeDashoffset:C+g,transform:"rotate(".concat(s+h+b,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},lr=function(t){var r=He(He({},rr),t),n=r.id,i=r.prefixCls,s=r.steps,a=r.strokeWidth,o=r.trailWidth,c=r.gapDegree,d=c===void 0?0:c,u=r.gapPosition,g=r.trailColor,h=r.strokeLinecap,b=r.style,C=r.className,S=r.strokeColor,x=r.percent,I=rt(r,ar),y=sr(n),m="".concat(y,"-gradient"),$=ve/2-a/2,p=Math.PI*2*$,E=d>0?90+d/2:-90,D=p*((360-d)/360),q=be(s)==="object"?s:{count:s,space:2},M=q.count,N=q.space,T=Pe(p,D,0,100,E,d,u,g,h,a),G=Ye(x),Q=Ye(S),_=Q.find(function(K){return K&&be(K)==="object"}),F=nr(),Y=function(){var W=0;return G.map(function(V,z){var Z=Q[z]||Q[Q.length-1],v=Z&&be(Z)==="object"?"url(#".concat(m,")"):void 0,P=Pe(p,D,W,V,E,d,u,Z,h,a);return W+=V,l.createElement("circle",{key:z,className:"".concat(i,"-circle-path"),r:$,cx:0,cy:0,stroke:v,strokeLinecap:h,strokeWidth:a,opacity:V===0?0:1,style:P,ref:function(A){F[z]=A}})}).reverse()},oe=function(){var W=Math.round(M*(G[0]/100)),V=100/M,z=0;return new Array(M).fill(null).map(function(Z,v){var P=v<=W-1?Q[0]:g,B=P&&be(P)==="object"?"url(#".concat(m,")"):void 0,A=Pe(p,D,z,V,E,d,u,P,"butt",a,N);return z+=(D-A.strokeDashoffset+N)*100/D,l.createElement("circle",{key:v,className:"".concat(i,"-circle-path"),r:$,cx:0,cy:0,stroke:B,strokeWidth:a,opacity:1,style:A,ref:function(re){F[v]=re}})})};return l.createElement("svg",Ce({className:U("".concat(i,"-circle"),C),viewBox:"".concat(-ve/2," ").concat(-ve/2," ").concat(ve," ").concat(ve),style:b,id:n,role:"presentation"},I),_&&l.createElement("defs",null,l.createElement("linearGradient",{id:m,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(_).sort(function(K,W){return Qe(K)-Qe(W)}).map(function(K,W){return l.createElement("stop",{key:W,offset:K,stopColor:_[K]})}))),!M&&l.createElement("circle",{className:"".concat(i,"-circle-trail"),r:$,cx:0,cy:0,stroke:g,strokeLinecap:h,strokeWidth:o||a,style:T}),M?oe():Y())};function pe(e){return!e||e<0?0:e>100?100:e}function xe(e){let{success:t,successPercent:r}=e,n=r;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}const cr=e=>{let{percent:t,success:r,successPercent:n}=e;const i=pe(xe({success:r,successPercent:n}));return[i,pe(pe(t)-i)]},dr=e=>{let{success:t={},strokeColor:r}=e;const{strokeColor:n}=t;return[n||ke.green,r||null]},Ee=(e,t,r)=>{var n,i,s,a;let o=-1,c=-1;if(t==="step"){const d=r.steps,u=r.strokeWidth;typeof e=="string"||typeof e>"u"?(o=e==="small"?2:14,c=u??8):typeof e=="number"?[o,c]=[e,e]:[o=14,c=8]=e,o*=d}else if(t==="line"){const d=r==null?void 0:r.strokeWidth;typeof e=="string"||typeof e>"u"?c=d||(e==="small"?6:8):typeof e=="number"?[o,c]=[e,e]:[o=-1,c=8]=e}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[o,c]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[o,c]=[e,e]:(o=(i=(n=e[0])!==null&&n!==void 0?n:e[1])!==null&&i!==void 0?i:120,c=(a=(s=e[0])!==null&&s!==void 0?s:e[1])!==null&&a!==void 0?a:120));return[o,c]},ur=3,pr=e=>ur/e*100,mr=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:n="round",gapPosition:i,gapDegree:s,width:a=120,type:o,children:c,success:d,size:u=a}=e,[g,h]=Ee(u,"circle");let{strokeWidth:b}=e;b===void 0&&(b=Math.max(pr(g),6));const C={width:g,height:h,fontSize:g*.15+6},S=l.useMemo(()=>{if(s||s===0)return s;if(o==="dashboard")return 75},[s,o]),x=i||o==="dashboard"&&"bottom"||void 0,I=Object.prototype.toString.call(e.strokeColor)==="[object Object]",y=dr({success:d,strokeColor:e.strokeColor}),m=U(`${t}-inner`,{[`${t}-circle-gradient`]:I}),$=l.createElement(lr,{percent:cr(e),strokeWidth:b,trailWidth:b,strokeColor:y,strokeLinecap:n,trailColor:r,prefixCls:t,gapDegree:S,gapPosition:x});return l.createElement("div",{className:m,style:C},g<=20?l.createElement(nt,{title:c},l.createElement("span",null,$)):l.createElement(l.Fragment,null,$,c))},fr=mr;var gr=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const hr=e=>{let t=[];return Object.keys(e).forEach(r=>{const n=parseFloat(r.replace(/%/g,""));isNaN(n)||t.push({key:n,value:e[r]})}),t=t.sort((r,n)=>r.key-n.key),t.map(r=>{let{key:n,value:i}=r;return`${i} ${n}%`}).join(", ")},vr=(e,t)=>{const{from:r=ke.blue,to:n=ke.blue,direction:i=t==="rtl"?"to left":"to right"}=e,s=gr(e,["from","to","direction"]);if(Object.keys(s).length!==0){const a=hr(s);return{backgroundImage:`linear-gradient(${i}, ${a})`}}return{backgroundImage:`linear-gradient(${i}, ${r}, ${n})`}},br=e=>{const{prefixCls:t,direction:r,percent:n,size:i,strokeWidth:s,strokeColor:a,strokeLinecap:o="round",children:c,trailColor:d=null,success:u}=e,g=a&&typeof a!="string"?vr(a,r):{backgroundColor:a},h=o==="square"||o==="butt"?0:void 0,b={backgroundColor:d||void 0,borderRadius:h},C=i??[-1,s||(i==="small"?6:8)],[S,x]=Ee(C,"line",{strokeWidth:s}),I=Object.assign({width:`${pe(n)}%`,height:x,borderRadius:h},g),y=xe(e),m={width:`${pe(y)}%`,height:x,borderRadius:h,backgroundColor:u==null?void 0:u.strokeColor},$={width:S<0?"100%":S,height:x};return l.createElement(l.Fragment,null,l.createElement("div",{className:`${t}-outer`,style:$},l.createElement("div",{className:`${t}-inner`,style:b},l.createElement("div",{className:`${t}-bg`,style:I}),y!==void 0?l.createElement("div",{className:`${t}-success-bg`,style:m}):null)),c)},yr=br,$r=e=>{const{size:t,steps:r,percent:n=0,strokeWidth:i=8,strokeColor:s,trailColor:a=null,prefixCls:o,children:c}=e,d=Math.round(r*(n/100)),g=t??[t==="small"?2:14,i],[h,b]=Ee(g,"step",{steps:r,strokeWidth:i}),C=h/r,S=new Array(r);for(let x=0;x<r;x++){const I=Array.isArray(s)?s[x]:s;S[x]=l.createElement("div",{key:x,className:U(`${o}-steps-item`,{[`${o}-steps-item-active`]:x<=d-1}),style:{backgroundColor:x<=d-1?I:a,width:C,height:b}})}return l.createElement("div",{className:`${o}-steps-outer`},S,c)},wr=$r,Cr=new Me("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),Sr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},st(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS},[`${t}-outer`]:{display:"inline-block",width:"100%"},[`&${t}-show-info`]:{[`${t}-outer`]:{marginInlineEnd:`calc(-2em - ${e.marginXS}px)`,paddingInlineEnd:`calc(2em + ${e.paddingXS}px)`}},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorInfo}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:Cr,animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},xr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.progressRemainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:`${e.fontSize/e.fontSizeSM}em`}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Ir=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.colorInfo}}}}}},Er=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},jr=ot("Progress",e=>{const t=e.marginXXS/2,r=it(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Sr(r),xr(r),Ir(r),Er(r)]});var Or=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Dr=["normal","exception","active","success"],Pr=l.forwardRef((e,t)=>{const{prefixCls:r,className:n,rootClassName:i,steps:s,strokeColor:a,percent:o=0,size:c="default",showInfo:d=!0,type:u="line",status:g,format:h}=e,b=Or(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format"]),C=l.useMemo(()=>{var N,T;const G=xe(e);return parseInt(G!==void 0?(N=G??0)===null||N===void 0?void 0:N.toString():(T=o??0)===null||T===void 0?void 0:T.toString(),10)},[o,e.success,e.successPercent]),S=l.useMemo(()=>!Dr.includes(g)&&C>=100?"success":g||"normal",[g,C]),{getPrefixCls:x,direction:I}=l.useContext(Ie),y=x("progress",r),[m,$]=jr(y),p=l.useMemo(()=>{if(!d)return null;const N=xe(e);let T;const G=h||(_=>`${_}%`),Q=u==="line";return h||S!=="exception"&&S!=="success"?T=G(pe(o),pe(N)):S==="exception"?T=Q?l.createElement(Et,null):l.createElement(jt,null):S==="success"&&(T=Q?l.createElement(Ot,null):l.createElement(Dt,null)),l.createElement("span",{className:`${y}-text`,title:typeof T=="string"?T:void 0},T)},[d,o,C,S,u,y,h]),E=Array.isArray(a)?a[0]:a,D=typeof a=="string"||Array.isArray(a)?a:void 0;let q;u==="line"?q=s?l.createElement(wr,Object.assign({},e,{strokeColor:D,prefixCls:y,steps:s}),p):l.createElement(yr,Object.assign({},e,{strokeColor:E,prefixCls:y,direction:I}),p):(u==="circle"||u==="dashboard")&&(q=l.createElement(fr,Object.assign({},e,{strokeColor:E,prefixCls:y,progressStatus:S}),p));const M=U(y,{[`${y}-inline-circle`]:u==="circle"&&Ee(c,"circle")[0]<=20,[`${y}-${u==="dashboard"&&"circle"||s&&"steps"||u}`]:!0,[`${y}-status-${S}`]:!0,[`${y}-show-info`]:d,[`${y}-${c}`]:typeof c=="string",[`${y}-rtl`]:I==="rtl"},n,i,$);return m(l.createElement("div",Object.assign({ref:t,className:M,role:"progressbar","aria-valuenow":C},It(b,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),q))}),Rr=Pr;function Fr(e,t){var r="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),n=new Error(r);return n.status=t.status,n.method=e.method,n.url=e.action,n}function Ze(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function Nr(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(s){s.total>0&&(s.percent=s.loaded/s.total*100),e.onProgress(s)});var r=new FormData;e.data&&Object.keys(e.data).forEach(function(i){var s=e.data[i];if(Array.isArray(s)){s.forEach(function(a){r.append("".concat(i,"[]"),a)});return}r.append(i,s)}),e.file instanceof Blob?r.append(e.filename,e.file,e.file.name):r.append(e.filename,e.file),t.onerror=function(s){e.onError(s)},t.onload=function(){return t.status<200||t.status>=300?e.onError(Fr(e,t),Ze(t)):e.onSuccess(Ze(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var n=e.headers||{};return n["X-Requested-With"]!==null&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(n).forEach(function(i){n[i]!==null&&t.setRequestHeader(i,n[i])}),t.send(r),{abort:function(){t.abort()}}}var Lr=+new Date,kr=0;function Re(){return"rc-upload-".concat(Lr,"-").concat(++kr)}const Fe=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",i=e.type||"",s=i.replace(/\/.*$/,"");return r.some(function(a){var o=a.trim();if(/^\*(\/\*)?$/.test(a))return!0;if(o.charAt(0)==="."){var c=n.toLowerCase(),d=o.toLowerCase(),u=[d];return(d===".jpg"||d===".jpeg")&&(u=[".jpg",".jpeg"]),u.some(function(g){return c.endsWith(g)})}return/\/\*$/.test(o)?s===o.replace(/\/.*$/,""):i===o?!0:/^\w+$/.test(o)?(Pt(!1,"Upload takes an invalidate 'accept' type '".concat(o,"'.Skip for check.")),!0):!1})}return!0};function Tr(e,t){var r=e.createReader(),n=[];function i(){r.readEntries(function(s){var a=Array.prototype.slice.apply(s);n=n.concat(a);var o=!a.length;o?t(n):i()})}i()}var Ar=function(t,r,n){var i=function s(a,o){a.path=o||"",a.isFile?a.file(function(c){n(c)&&(a.fullPath&&!c.webkitRelativePath&&(Object.defineProperties(c,{webkitRelativePath:{writable:!0}}),c.webkitRelativePath=a.fullPath.replace(/^\//,""),Object.defineProperties(c,{webkitRelativePath:{writable:!1}})),r([c]))}):a.isDirectory&&Tr(a,function(c){c.forEach(function(d){s(d,"".concat(o).concat(a.name,"/"))})})};t.forEach(function(s){i(s.webkitGetAsEntry())})},Ur=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],Mr=function(e){at(r,e);var t=lt(r);function r(){var n;ct(this,r);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s)),n.state={uid:Re()},n.reqs={},n.fileInput=void 0,n._isMounted=void 0,n.onChange=function(o){var c=n.props,d=c.accept,u=c.directory,g=o.target.files,h=ue(g).filter(function(b){return!u||Fe(b,d)});n.uploadFiles(h),n.reset()},n.onClick=function(o){var c=n.fileInput;if(c){var d=n.props,u=d.children,g=d.onClick;if(u&&u.type==="button"){var h=c.parentNode;h.focus(),h.querySelector("button").blur()}c.click(),g&&g(o)}},n.onKeyDown=function(o){o.key==="Enter"&&n.onClick(o)},n.onFileDrop=function(o){var c=n.props.multiple;if(o.preventDefault(),o.type!=="dragover")if(n.props.directory)Ar(Array.prototype.slice.call(o.dataTransfer.items),n.uploadFiles,function(u){return Fe(u,n.props.accept)});else{var d=ue(o.dataTransfer.files).filter(function(u){return Fe(u,n.props.accept)});c===!1&&(d=d.slice(0,1)),n.uploadFiles(d)}},n.uploadFiles=function(o){var c=ue(o),d=c.map(function(u){return u.uid=Re(),n.processFile(u,c)});Promise.all(d).then(function(u){var g=n.props.onBatchStart;g==null||g(u.map(function(h){var b=h.origin,C=h.parsedFile;return{file:b,parsedFile:C}})),u.filter(function(h){return h.parsedFile!==null}).forEach(function(h){n.post(h)})})},n.processFile=function(){var o=Ft(Xe().mark(function c(d,u){var g,h,b,C,S,x,I,y,m;return Xe().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(g=n.props.beforeUpload,h=d,!g){p.next=14;break}return p.prev=3,p.next=6,g(d,u);case 6:h=p.sent,p.next=12;break;case 9:p.prev=9,p.t0=p.catch(3),h=!1;case 12:if(h!==!1){p.next=14;break}return p.abrupt("return",{origin:d,parsedFile:null,action:null,data:null});case 14:if(b=n.props.action,typeof b!="function"){p.next=21;break}return p.next=18,b(d);case 18:C=p.sent,p.next=22;break;case 21:C=b;case 22:if(S=n.props.data,typeof S!="function"){p.next=29;break}return p.next=26,S(d);case 26:x=p.sent,p.next=30;break;case 29:x=S;case 30:return I=(be(h)==="object"||typeof h=="string")&&h?h:d,I instanceof File?y=I:y=new File([I],d.name,{type:d.type}),m=y,m.uid=d.uid,p.abrupt("return",{origin:d,data:x,parsedFile:m,action:C});case 35:case"end":return p.stop()}},c,null,[[3,9]])}));return function(c,d){return o.apply(this,arguments)}}(),n.saveFileInput=function(o){n.fileInput=o},n}return dt(r,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(i){var s=this,a=i.data,o=i.origin,c=i.action,d=i.parsedFile;if(this._isMounted){var u=this.props,g=u.onStart,h=u.customRequest,b=u.name,C=u.headers,S=u.withCredentials,x=u.method,I=o.uid,y=h||Nr,m={action:c,filename:b,data:a,file:d,headers:C,withCredentials:S,method:x||"post",onProgress:function(p){var E=s.props.onProgress;E==null||E(p,d)},onSuccess:function(p,E){var D=s.props.onSuccess;D==null||D(p,d,E),delete s.reqs[I]},onError:function(p,E){var D=s.props.onError;D==null||D(p,E,d),delete s.reqs[I]}};g(o),this.reqs[I]=y(m)}}},{key:"reset",value:function(){this.setState({uid:Re()})}},{key:"abort",value:function(i){var s=this.reqs;if(i){var a=i.uid?i.uid:i;s[a]&&s[a].abort&&s[a].abort(),delete s[a]}else Object.keys(s).forEach(function(o){s[o]&&s[o].abort&&s[o].abort(),delete s[o]})}},{key:"render",value:function(){var i,s=this.props,a=s.component,o=s.prefixCls,c=s.className,d=s.disabled,u=s.id,g=s.style,h=s.multiple,b=s.accept,C=s.capture,S=s.children,x=s.directory,I=s.openFileDialogOnClick,y=s.onMouseEnter,m=s.onMouseLeave,$=rt(s,Ur),p=U((i={},De(i,o,!0),De(i,"".concat(o,"-disabled"),d),De(i,c,c),i)),E=x?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},D=d?{}:{onClick:I?this.onClick:function(){},onKeyDown:I?this.onKeyDown:function(){},onMouseEnter:y,onMouseLeave:m,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return Te.createElement(a,Ce({},D,{className:p,role:"button",style:g}),Te.createElement("input",Ce({},Rt($,{aria:!0,data:!0}),{id:u,type:"file",ref:this.saveFileInput,onClick:function(M){return M.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:b},E,{multiple:h,onChange:this.onChange},C!=null?{capture:C}:{})),S)}}]),r}(l.Component);function Ne(){}var Ue=function(e){at(r,e);var t=lt(r);function r(){var n;ct(this,r);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=t.call.apply(t,[this].concat(s)),n.uploader=void 0,n.saveUploader=function(o){n.uploader=o},n}return dt(r,[{key:"abort",value:function(i){this.uploader.abort(i)}},{key:"render",value:function(){return Te.createElement(Mr,Ce({},this.props,{ref:this.saveUploader}))}}]),r}(l.Component);Ue.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:Ne,onError:Ne,onSuccess:Ne,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};function $e(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function we(e,t){const r=ue(t),n=r.findIndex(i=>{let{uid:s}=i;return s===e.uid});return n===-1?r.push(e):r[n]=e,r}function Le(e,t){const r=e.uid!==void 0?"uid":"name";return t.filter(n=>n[r]===e[r])[0]}function _r(e,t){const r=e.uid!==void 0?"uid":"name",n=t.filter(i=>i[r]!==e[r]);return n.length===t.length?null:n}const Wr=function(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),n=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]},ft=e=>e.indexOf("image/")===0,Hr=e=>{if(e.type&&!e.thumbUrl)return ft(e.type);const t=e.thumbUrl||e.url||"",r=Wr(t);return/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(r)?!0:!(/^data:/.test(t)||r)},ae=200;function Xr(e){return new Promise(t=>{if(!e.type||!ft(e.type)){t("");return}const r=document.createElement("canvas");r.width=ae,r.height=ae,r.style.cssText=`position: fixed; left: 0; top: 0; width: ${ae}px; height: ${ae}px; z-index: 9999; display: none;`,document.body.appendChild(r);const n=r.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:s,height:a}=i;let o=ae,c=ae,d=0,u=0;s>a?(c=a*(ae/s),u=-(c-o)/2):(o=s*(ae/a),d=-(o-c)/2),n.drawImage(i,d,u,o,c);const g=r.toDataURL();document.body.removeChild(r),t(g)},i.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const s=new FileReader;s.addEventListener("load",()=>{s.result&&(i.src=s.result)}),s.readAsDataURL(e)}else i.src=window.URL.createObjectURL(e)})}const zr=l.forwardRef((e,t)=>{let{prefixCls:r,className:n,style:i,locale:s,listType:a,file:o,items:c,progress:d,iconRender:u,actionIconRender:g,itemRender:h,isImgUrl:b,showPreviewIcon:C,showRemoveIcon:S,showDownloadIcon:x,previewIcon:I,removeIcon:y,downloadIcon:m,onPreview:$,onDownload:p,onClose:E}=e;var D,q;const{status:M}=o,[N,T]=l.useState(M);l.useEffect(()=>{M!=="removed"&&T(M)},[M]);const[G,Q]=l.useState(!1),_=l.useRef(null);l.useEffect(()=>(_.current=setTimeout(()=>{Q(!0)},300),()=>{_.current&&clearTimeout(_.current)}),[]);const F=u(o);let Y=l.createElement("div",{className:`${r}-icon`},F);if(a==="picture"||a==="picture-card"||a==="picture-circle")if(N==="uploading"||!o.thumbUrl&&!o.url){const H=U({[`${r}-list-item-thumbnail`]:!0,[`${r}-list-item-file`]:N!=="uploading"});Y=l.createElement("div",{className:H},F)}else{const H=b!=null&&b(o)?l.createElement("img",{src:o.thumbUrl||o.url,alt:o.name,className:`${r}-list-item-image`,crossOrigin:o.crossOrigin}):F,se=U({[`${r}-list-item-thumbnail`]:!0,[`${r}-list-item-file`]:b&&!b(o)});Y=l.createElement("a",{className:se,onClick:he=>$(o,he),href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer"},H)}const oe=U(`${r}-list-item`,`${r}-list-item-${N}`),K=typeof o.linkProps=="string"?JSON.parse(o.linkProps):o.linkProps,W=S?g((typeof y=="function"?y(o):y)||l.createElement(Nt,null),()=>E(o),r,s.removeFile):null,V=x&&N==="done"?g((typeof m=="function"?m(o):m)||l.createElement(Lt,null),()=>p(o),r,s.downloadFile):null,z=a!=="picture-card"&&a!=="picture-circle"&&l.createElement("span",{key:"download-delete",className:U(`${r}-list-item-actions`,{picture:a==="picture"})},V,W),Z=U(`${r}-list-item-name`),v=o.url?[l.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:Z,title:o.name},K,{href:o.url,onClick:H=>$(o,H)}),o.name),z]:[l.createElement("span",{key:"view",className:Z,onClick:H=>$(o,H),title:o.name},o.name),z],P={pointerEvents:"none",opacity:.5},B=C?l.createElement("a",{href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:o.url||o.thumbUrl?void 0:P,onClick:H=>$(o,H),title:s.previewFile},typeof I=="function"?I(o):I||l.createElement(kt,null)):null,A=(a==="picture-card"||a==="picture-circle")&&N!=="uploading"&&l.createElement("span",{className:`${r}-list-item-actions`},B,N==="done"&&V,W),{getPrefixCls:ee}=l.useContext(Ie),re=ee(),ge=l.createElement("div",{className:oe},Y,v,A,G&&l.createElement(ut,{motionName:`${re}-fade`,visible:N==="uploading",motionDeadline:2e3},H=>{let{className:se}=H;const he="percent"in o?l.createElement(Rr,Object.assign({},d,{type:"line",percent:o.percent,"aria-label":o["aria-label"],"aria-labelledby":o["aria-labelledby"]})):null;return l.createElement("div",{className:U(`${r}-list-item-progress`,se)},he)})),L=o.response&&typeof o.response=="string"?o.response:((D=o.error)===null||D===void 0?void 0:D.statusText)||((q=o.error)===null||q===void 0?void 0:q.message)||s.uploadError,ie=N==="error"?l.createElement(nt,{title:L,getPopupContainer:H=>H.parentNode},ge):ge;return l.createElement("div",{className:U(`${r}-list-item-container`,n),style:i,ref:t},h?h(ie,o,c,{download:p.bind(null,o),preview:$.bind(null,o),remove:E.bind(null,o)}):ie)}),Br=zr,qr=(e,t)=>{const{listType:r="text",previewFile:n=Xr,onPreview:i,onDownload:s,onRemove:a,locale:o,iconRender:c,isImageUrl:d=Hr,prefixCls:u,items:g=[],showPreviewIcon:h=!0,showRemoveIcon:b=!0,showDownloadIcon:C=!1,removeIcon:S,previewIcon:x,downloadIcon:I,progress:y={size:[-1,2],showInfo:!1},appendAction:m,appendActionVisible:$=!0,itemRender:p,disabled:E}=e,D=er(),[q,M]=l.useState(!1);l.useEffect(()=>{r!=="picture"&&r!=="picture-card"&&r!=="picture-circle"||(g||[]).forEach(v=>{typeof document>"u"||typeof window>"u"||!window.FileReader||!window.File||!(v.originFileObj instanceof File||v.originFileObj instanceof Blob)||v.thumbUrl!==void 0||(v.thumbUrl="",n&&n(v.originFileObj).then(P=>{v.thumbUrl=P||"",D()}))})},[r,g,n]),l.useEffect(()=>{M(!0)},[]);const N=(v,P)=>{if(i)return P==null||P.preventDefault(),i(v)},T=v=>{typeof s=="function"?s(v):v.url&&window.open(v.url)},G=v=>{a==null||a(v)},Q=v=>{if(c)return c(v,r);const P=v.status==="uploading",B=d&&d(v)?l.createElement(Ut,null):l.createElement(Mt,null);let A=P?l.createElement(Ae,null):l.createElement(_t,null);return r==="picture"?A=P?l.createElement(Ae,null):B:(r==="picture-card"||r==="picture-circle")&&(A=P?o.uploading:B),A},_=(v,P,B,A)=>{const ee={type:"text",size:"small",title:A,onClick:re=>{P(),Be(v)&&v.props.onClick&&v.props.onClick(re)},className:`${B}-list-item-action`,disabled:E};if(Be(v)){const re=ze(v,Object.assign(Object.assign({},v.props),{onClick:()=>{}}));return l.createElement(ne,Object.assign({},ee,{icon:re}))}return l.createElement(ne,Object.assign({},ee),l.createElement("span",null,v))};l.useImperativeHandle(t,()=>({handlePreview:N,handleDownload:T}));const{getPrefixCls:F}=l.useContext(Ie),Y=F("upload",u),oe=F(),K=U({[`${Y}-list`]:!0,[`${Y}-list-${r}`]:!0}),W=ue(g.map(v=>({key:v.uid,file:v})));let z={motionDeadline:2e3,motionName:`${Y}-${r==="picture-card"||r==="picture-circle"?"animate-inline":"animate"}`,keys:W,motionAppear:q};const Z=l.useMemo(()=>{const v=Object.assign({},Tt(oe));return delete v.onAppearEnd,delete v.onEnterEnd,delete v.onLeaveEnd,v},[oe]);return r!=="picture-card"&&r!=="picture-circle"&&(z=Object.assign(Object.assign({},Z),z)),l.createElement("div",{className:K},l.createElement(At,Object.assign({},z,{component:!1}),v=>{let{key:P,file:B,className:A,style:ee}=v;return l.createElement(Br,{key:P,locale:o,prefixCls:Y,className:A,style:ee,file:B,items:g,progress:y,listType:r,isImgUrl:d,showPreviewIcon:h,showRemoveIcon:b,showDownloadIcon:C,removeIcon:S,previewIcon:x,downloadIcon:I,iconRender:Q,actionIconRender:_,itemRender:p,onPreview:N,onDownload:T,onClose:G})}),m&&l.createElement(ut,Object.assign({},z,{visible:$,forceRender:!0}),v=>{let{className:P,style:B}=v;return ze(m,A=>({className:U(A.className,P),style:Object.assign(Object.assign(Object.assign({},B),{pointerEvents:P?"none":void 0}),A.style)}))}))},Gr=l.forwardRef(qr),Kr=Gr,Vr=e=>{const{componentCls:t,iconCls:r}=e;return{[`${t}-wrapper`]:{[`${t}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${e.lineWidth}px dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[t]:{padding:`${e.padding}px 0`},[`${t}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none"},[`${t}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimaryHover},[`p${t}-drag-icon`]:{marginBottom:e.margin,[r]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${t}-text`]:{margin:`0 0 ${e.marginXXS}px`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${t}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${t}-disabled`]:{cursor:"not-allowed",[`p${t}-drag-icon ${r},
            p${t}-text,
            p${t}-hint
          `]:{color:e.colorTextDisabled}}}}}},Jr=Vr,Qr=e=>{const{componentCls:t,antCls:r,iconCls:n,fontSize:i,lineHeight:s}=e,a=`${t}-list-item`,o=`${a}-actions`,c=`${a}-action`,d=Math.round(i*s);return{[`${t}-wrapper`]:{[`${t}-list`]:Object.assign(Object.assign({},pt()),{lineHeight:e.lineHeight,[a]:{position:"relative",height:e.lineHeight*i,marginTop:e.marginXS,fontSize:i,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,"&:hover":{backgroundColor:e.controlItemBgHover},[`${a}-name`]:Object.assign(Object.assign({},mt),{padding:`0 ${e.paddingXS}px`,lineHeight:s,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[o]:{[c]:{opacity:0},[`${c}${r}-btn-sm`]:{height:d,border:0,lineHeight:1,"> span":{transform:"scale(1)"}},[`
              ${c}:focus,
              &.picture ${c}
            `]:{opacity:1},[n]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`&:hover ${n}`]:{color:e.colorText}},[`${t}-icon ${n}`]:{color:e.colorTextDescription,fontSize:i},[`${a}-progress`]:{position:"absolute",bottom:-e.uploadProgressOffset,width:"100%",paddingInlineStart:i+e.paddingXS,fontSize:i,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${a}:hover ${c}`]:{opacity:1,color:e.colorText},[`${a}-error`]:{color:e.colorError,[`${a}-name, ${t}-icon ${n}`]:{color:e.colorError},[o]:{[`${n}, ${n}:hover`]:{color:e.colorError},[c]:{opacity:1}}},[`${t}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},Yr=Qr,et=new Me("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),tt=new Me("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),Zr=e=>{const{componentCls:t}=e,r=`${t}-animate-inline`;return[{[`${t}-wrapper`]:{[`${r}-appear, ${r}-enter, ${r}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${r}-appear, ${r}-enter`]:{animationName:et},[`${r}-leave`]:{animationName:tt}}},et,tt]},en=Zr,tn=e=>{const{componentCls:t,iconCls:r,uploadThumbnailSize:n,uploadProgressOffset:i}=e,s=`${t}-list`,a=`${s}-item`;return{[`${t}-wrapper`]:{[`
        ${s}${s}-picture,
        ${s}${s}-picture-card,
        ${s}${s}-picture-circle
      `]:{[a]:{position:"relative",height:n+e.lineWidth*2+e.paddingXS*2,padding:e.paddingXS,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${a}-thumbnail`]:Object.assign(Object.assign({},mt),{width:n,height:n,lineHeight:`${n+e.paddingSM}px`,textAlign:"center",flex:"none",[r]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${a}-progress`]:{bottom:i,width:`calc(100% - ${e.paddingSM*2}px)`,marginTop:0,paddingInlineStart:n+e.paddingXS}},[`${a}-error`]:{borderColor:e.colorError,[`${a}-thumbnail ${r}`]:{[`svg path[fill='${qe[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${qe.primary}']`]:{fill:e.colorError}}},[`${a}-uploading`]:{borderStyle:"dashed",[`${a}-name`]:{marginBottom:i}}},[`${s}${s}-picture-circle ${a}`]:{[`&, &::before, ${a}-thumbnail`]:{borderRadius:"50%"}}}}},rn=e=>{const{componentCls:t,iconCls:r,fontSizeLG:n,colorTextLightSolid:i}=e,s=`${t}-list`,a=`${s}-item`,o=e.uploadPicCardSize;return{[`
      ${t}-wrapper${t}-picture-card-wrapper,
      ${t}-wrapper${t}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},pt()),{display:"inline-block",width:"100%",[`${t}${t}-select`]:{width:o,height:o,marginInlineEnd:e.marginXS,marginBottom:e.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${e.lineWidth}px dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${t}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${s}${s}-picture-card, ${s}${s}-picture-circle`]:{[`${s}-item-container`]:{display:"inline-block",width:o,height:o,marginBlock:`0 ${e.marginXS}px`,marginInline:`0 ${e.marginXS}px`,verticalAlign:"top"},"&::after":{display:"none"},[a]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${e.paddingXS*2}px)`,height:`calc(100% - ${e.paddingXS*2}px)`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${a}:hover`]:{[`&::before, ${a}-actions`]:{opacity:1}},[`${a}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`${r}-eye, ${r}-download, ${r}-delete`]:{zIndex:10,width:n,margin:`0 ${e.marginXXS}px`,fontSize:n,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,svg:{verticalAlign:"baseline"}}},[`${a}-actions, ${a}-actions:hover`]:{[`${r}-eye, ${r}-download, ${r}-delete`]:{color:new Wt(i).setAlpha(.65).toRgbString(),"&:hover":{color:i}}},[`${a}-thumbnail, ${a}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${a}-name`]:{display:"none",textAlign:"center"},[`${a}-file + ${a}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${e.paddingXS*2}px)`},[`${a}-uploading`]:{[`&${a}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${r}-eye, ${r}-download, ${r}-delete`]:{display:"none"}},[`${a}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${e.paddingXS*2}px)`,paddingInlineStart:0}}}),[`${t}-wrapper${t}-picture-circle-wrapper`]:{[`${t}${t}-select`]:{borderRadius:"50%"}}}},nn=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}},on=nn,sn=e=>{const{componentCls:t,colorTextDisabled:r}=e;return{[`${t}-wrapper`]:Object.assign(Object.assign({},st(e)),{[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${t}-select`]:{display:"inline-block"},[`${t}-disabled`]:{color:r,cursor:"not-allowed"}})}},an=ot("Upload",e=>{const{fontSizeHeading3:t,fontSize:r,lineHeight:n,lineWidth:i,controlHeightLG:s}=e,a=Math.round(r*n),o=it(e,{uploadThumbnailSize:t*2,uploadProgressOffset:a/2+i,uploadPicCardSize:s*2.55});return[sn(o),Jr(o),tn(o),rn(o),Yr(o),en(o),on(o),Ht(o)]},e=>({actionsColor:e.colorTextDescription}));var ln=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(u){try{d(n.next(u))}catch(g){a(g)}}function c(u){try{d(n.throw(u))}catch(g){a(g)}}function d(u){u.done?s(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const ye=`__LIST_IGNORE_${Date.now()}__`,cn=(e,t)=>{const{fileList:r,defaultFileList:n,onRemove:i,showUploadList:s=!0,listType:a="text",onPreview:o,onDownload:c,onChange:d,onDrop:u,previewFile:g,disabled:h,locale:b,iconRender:C,isImageUrl:S,progress:x,prefixCls:I,className:y,type:m="select",children:$,style:p,itemRender:E,maxCount:D,data:q={},multiple:M=!1,action:N="",accept:T="",supportServerRender:G=!0}=e,Q=l.useContext(Xt),_=h??Q,[F,Y]=zt(n||[],{value:r,postState:w=>w??[]}),[oe,K]=l.useState("drop"),W=l.useRef(null);l.useMemo(()=>{const w=Date.now();(r||[]).forEach((O,k)=>{!O.uid&&!Object.isFrozen(O)&&(O.uid=`__AUTO__${w}_${k}__`)})},[r]);const V=(w,O,k)=>{let j=ue(O),R=!1;D===1?j=j.slice(-1):D&&(R=!0,j=j.slice(0,D)),Ge.flushSync(()=>{Y(j)});const J={file:w,fileList:j};k&&(J.event=k),(!R||j.some(le=>le.uid===w.uid))&&Ge.flushSync(()=>{d==null||d(J)})},z=(w,O)=>ln(void 0,void 0,void 0,function*(){const{beforeUpload:k,transformFile:j}=e;let R=w;if(k){const J=yield k(w,O);if(J===!1)return!1;if(delete w[ye],J===ye)return Object.defineProperty(w,ye,{value:!0,configurable:!0}),!1;typeof J=="object"&&J&&(R=J)}return j&&(R=yield j(R)),R}),Z=w=>{const O=w.filter(R=>!R.file[ye]);if(!O.length)return;const k=O.map(R=>$e(R.file));let j=ue(F);k.forEach(R=>{j=we(R,j)}),k.forEach((R,J)=>{let le=R;if(O[J].parsedFile)R.status="uploading";else{const{originFileObj:me}=R;let ce;try{ce=new File([me],me.name,{type:me.type})}catch{ce=new Blob([me],{type:me.type}),ce.name=me.name,ce.lastModifiedDate=new Date,ce.lastModified=new Date().getTime()}ce.uid=R.uid,le=ce}V(le,j)})},v=(w,O,k)=>{try{typeof w=="string"&&(w=JSON.parse(w))}catch{}if(!Le(O,F))return;const j=$e(O);j.status="done",j.percent=100,j.response=w,j.xhr=k;const R=we(j,F);V(j,R)},P=(w,O)=>{if(!Le(O,F))return;const k=$e(O);k.status="uploading",k.percent=w.percent;const j=we(k,F);V(k,j,w)},B=(w,O,k)=>{if(!Le(k,F))return;const j=$e(k);j.error=w,j.response=O,j.status="error";const R=we(j,F);V(j,R)},A=w=>{let O;Promise.resolve(typeof i=="function"?i(w):i).then(k=>{var j;if(k===!1)return;const R=_r(w,F);R&&(O=Object.assign(Object.assign({},w),{status:"removed"}),F==null||F.forEach(J=>{const le=O.uid!==void 0?"uid":"name";J[le]===O[le]&&!Object.isFrozen(J)&&(J.status="removed")}),(j=W.current)===null||j===void 0||j.abort(O),V(O,R))})},ee=w=>{K(w.type),w.type==="drop"&&(u==null||u(w))};l.useImperativeHandle(t,()=>({onBatchStart:Z,onSuccess:v,onProgress:P,onError:B,fileList:F,upload:W.current}));const{getPrefixCls:re,direction:ge}=l.useContext(Ie),L=re("upload",I),ie=Object.assign(Object.assign({onBatchStart:Z,onError:B,onProgress:P,onSuccess:v},e),{data:q,multiple:M,action:N,accept:T,supportServerRender:G,prefixCls:L,disabled:_,beforeUpload:z,onChange:void 0});delete ie.className,delete ie.style,(!$||_)&&delete ie.id;const[H,se]=an(L),[he]=Bt("Upload",qt.Upload),{showRemoveIcon:ht,showPreviewIcon:vt,showDownloadIcon:bt,removeIcon:yt,previewIcon:$t,downloadIcon:wt}=typeof s=="boolean"?{}:s,je=(w,O)=>s?l.createElement(Kr,{prefixCls:L,listType:a,items:F,previewFile:g,onPreview:o,onDownload:c,onRemove:A,showRemoveIcon:!_&&ht,showPreviewIcon:vt,showDownloadIcon:bt,removeIcon:yt,previewIcon:$t,downloadIcon:wt,iconRender:C,locale:Object.assign(Object.assign({},he),b),isImageUrl:S,progress:x,appendAction:w,appendActionVisible:O,itemRender:E,disabled:_}):w,Oe={[`${L}-rtl`]:ge==="rtl"};if(m==="drag"){const w=U(L,{[`${L}-drag`]:!0,[`${L}-drag-uploading`]:F.some(O=>O.status==="uploading"),[`${L}-drag-hover`]:oe==="dragover",[`${L}-disabled`]:_,[`${L}-rtl`]:ge==="rtl"},se);return H(l.createElement("span",{className:U(`${L}-wrapper`,Oe,y,se)},l.createElement("div",{className:w,onDrop:ee,onDragOver:ee,onDragLeave:ee,style:p},l.createElement(Ue,Object.assign({},ie,{ref:W,className:`${L}-btn`}),l.createElement("div",{className:`${L}-drag-container`},$))),je()))}const Ct=U(L,`${L}-select`,{[`${L}-disabled`]:_}),We=(w=>l.createElement("div",{className:Ct,style:w},l.createElement(Ue,Object.assign({},ie,{ref:W}))))($?void 0:{display:"none"});return H(a==="picture-card"||a==="picture-circle"?l.createElement("span",{className:U(`${L}-wrapper`,{[`${L}-picture-card-wrapper`]:a==="picture-card",[`${L}-picture-circle-wrapper`]:a==="picture-circle"},Oe,y,se)},je(We,!!$)):l.createElement("span",{className:U(`${L}-wrapper`,Oe,y,se)},We,je()))},dn=l.forwardRef(cn),gt=dn;var un=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const pn=l.forwardRef((e,t)=>{var{style:r,height:n}=e,i=un(e,["style","height"]);return l.createElement(gt,Object.assign({ref:t},i,{type:"drag",style:Object.assign(Object.assign({},r),{height:n})}))}),mn=pn,_e=gt;_e.Dragger=mn;_e.LIST_IGNORE=ye;const fn=_e,gn=e=>{const t=Gt("layout"),r=Kt(n=>n.userInfo.role);return e.auth?t.buttonList.includes(e.auth)||r===1?f.jsx(ne,{...e,children:e.children}):f.jsx(f.Fragment,{}):f.jsx(ne,{...e,children:e.children})},hn=e=>{const[t]=X.useForm(),[r,n]=l.useState(!1),[i,s]=l.useState("create"),[a,o]=l.useState(!1),[c,d]=l.useState([]),[u,g]=l.useState([]),[h,b]=l.useState();l.useEffect(()=>{S(),x()},[]),l.useImperativeHandle(e.mRef,()=>({open:C}));const C=(p,E)=>{s(p),n(!0),p==="edit"&&E&&(t.setFieldsValue(E),b(E.userImg))},S=async()=>{const p=await fe.getDeptList();d(p)},x=async()=>{const p=await fe.getAllRole();g(p)},I=f.jsxs("div",{children:[a?f.jsx(Ae,{}):f.jsx(Vt,{}),f.jsx("div",{style:{marginTop:8},children:"上传"})]}),y=p=>{if(p.file.status==="uploading"){o(!0);return}p.file.status==="done"&&(o(!1),b(p.file.response.data.file))},m=async()=>{const E={...await t.validateFields(),userImg:h};i==="create"?(await fe.createUser(E),Se.success("添加成功")):(await fe.editUser(E),Se.success("编辑成功")),$(),e.update()},$=()=>{t.resetFields(),b(""),n(!1)};return f.jsx(Yt,{title:i==="create"?"创建用户":"编辑用户",width:800,open:r,onOk:m,onCancel:$,children:f.jsxs(X,{form:t,layout:"horizontal",labelCol:{span:4},labelAlign:"right",children:[f.jsx(X.Item,{label:"用户Id",name:"userId",hidden:!0,children:f.jsx(de,{type:"number"})}),f.jsx(X.Item,{label:"用户名称",name:"userName",rules:[{required:!0,message:"请输入用户名称"}],children:f.jsx(de,{placeholder:"请输入用户名称"})}),f.jsx(X.Item,{label:"用户邮箱",name:"userEmail",rules:[{required:!0,message:"请输入用户邮箱"}],children:f.jsx(de,{placeholder:"请输入用户邮箱"})}),f.jsx(X.Item,{label:"手机号",name:"mobile",children:f.jsx(de,{type:"number",maxLength:11,placeholder:"请输入手机号"})}),f.jsx(X.Item,{label:"部门",name:"deptId",rules:[{required:!0,message:"请选择部门"}],children:f.jsx(Zt,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择部门",allowClear:!0,treeDefaultExpandAll:!0,treeData:c,fieldNames:{label:"deptName",value:"_id"}})}),f.jsx(X.Item,{label:"岗位",name:"job",children:f.jsx(de,{placeholder:"请输入岗位"})}),f.jsx(X.Item,{label:"状态",name:"state",children:f.jsxs(te,{placeholder:"请输入岗位",children:[f.jsx(te.Option,{value:1,children:"在职"}),f.jsx(te.Option,{value:2,children:"离职"}),f.jsx(te.Option,{value:3,children:"试用期"})]})}),f.jsx(X.Item,{label:"角色",name:"roleList",children:f.jsx(te,{placeholder:"请选择角色",children:u.map(p=>f.jsx(te.Option,{value:p._id,children:p.roleName},p._id))})}),f.jsx(X.Item,{label:"用户头像",children:f.jsx(fn,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/users/upload",onChange:y,children:h?f.jsx("img",{src:h,alt:"avatar",style:{width:"100%",borderRadius:"50%"}}):I})})]})})},xn=()=>{const[e]=X.useForm(),[t,r]=l.useState(0),[n,i]=l.useState({current:1,pageSize:10}),[s,a]=l.useState([]),[o,c]=l.useState([]),d=[{title:"用户ID",dataIndex:"userId"},{title:"用户名称",dataIndex:"userName"},{title:"用户邮箱",dataIndex:"userEmail"},{title:"用户角色",dataIndex:"role",render(m){return{0:"超级管理员",1:"管理员",2:"体验管理员",3:"普通用户"}[m]}},{title:"用户状态",dataIndex:"state",render(m){return Jt(m)}},{title:"注册时间",dataIndex:"createTime",render(m){return Ke(m)}},{title:"最后登录时间",dataIndex:"lastLoginTime",render(m){return Ke(m)}},{title:"操作",render(m){return f.jsxs(Qt,{children:[f.jsx(ne,{type:"text",onClick:()=>S(m),children:"编辑"}),f.jsx(ne,{type:"text",danger:!0,onClick:()=>x(m),children:"删除"})]})}}],u=l.useRef();l.useEffect(()=>{g({pageNum:n.current,pageSize:n.pageSize})},[n.current,n.pageSize]);const g=async m=>{var E;const $=e.getFieldsValue(),p=await fe.getSystemUserList({pageNum:(m==null?void 0:m.pageNum)||1,pageSize:(m==null?void 0:m.pageSize)||n.pageSize,...$});a((p==null?void 0:p.list)||[]),r((E=p==null?void 0:p.page)==null?void 0:E.total)},h=()=>{g()},b=()=>{e.resetFields()},C=()=>{var m;(m=u.current)==null||m.open("create")},S=m=>{var $;($=u.current)==null||$.open("edit",m)},x=m=>{Ve.confirm({title:"删除确认",content:f.jsx("span",{children:"确认删除该用户吗？"}),onOk:()=>{y([m.userId])}})},I=()=>{if(!(o!=null&&o.length)){Se.error("请选择需要删除的用户");return}Ve.confirm({title:"删除确认",content:f.jsx("span",{children:"确认删除该批用户吗？"}),onOk:()=>{y(o)}})},y=async m=>{await fe.deleteUser({userIds:m}),Se.success("删除成功"),g(),c([])};return f.jsxs("div",{className:"user-list",children:[f.jsxs(X,{form:e,initialValues:{state:0},layout:"inline",className:"search-form",children:[f.jsx(X.Item,{name:"userId",label:"用户ID",children:f.jsx(de,{placeholder:"请输入用户ID"})}),f.jsx(X.Item,{name:"userName",label:"用户名称",children:f.jsx(de,{placeholder:"请输入用户名称"})}),f.jsx(X.Item,{name:"state",label:"状态",children:f.jsxs(te,{style:{width:120},children:[f.jsx(te.Option,{value:0,children:"全部"}),f.jsx(te.Option,{value:1,children:"在职"}),f.jsx(te.Option,{value:2,children:"离职"}),f.jsx(te.Option,{value:3,children:"试用期"})]})}),f.jsxs(X.Item,{children:[f.jsx(ne,{type:"primary",className:"mr10",onClick:h,children:"搜索"}),f.jsx(ne,{type:"default",onClick:b,children:"重置"})]})]}),f.jsxs("div",{className:"base-table",children:[f.jsxs("div",{className:"header-wrap",children:[f.jsx("div",{className:"title",children:"用户列表"}),f.jsxs("div",{className:"action",children:[f.jsx(gn,{auth:"user@create",type:"primary",onClick:C,children:"新增"}),f.jsx(ne,{type:"primary",danger:!0,onClick:I,children:"批量删除"})]})]}),f.jsx(tr,{bordered:!0,rowSelection:{type:"checkbox",selectedRowKeys:o,onChange:m=>{c(m)}},rowKey:"userId",dataSource:s,columns:d,pagination:{position:["bottomRight"],current:n.current,pageSize:n.pageSize,total:t,showQuickJumper:!0,showSizeChanger:!0,showTotal:m=>`共 ${m} 条`,onChange:(m,$)=>{i({current:m,pageSize:$})}}})]}),f.jsx(hn,{mRef:u,update:()=>{g()}})]})};export{xn as default};
